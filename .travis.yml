sudo: required
dist: xenial

language: bash
script:  
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_004_all_1801031407_e2352bc7493e4d48.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip     
      - sudo zip -r ob1.zip -s 1000m *
      - transfer ./ob1.zip
      - transfer ./ob1.z01
      - echo done


addons:
  apt:
    packages:
    - zip
    - unzip
    - p7zip-full
    
  addons:
    apt:
      update: true 
  
addons:
  snaps:
    - transfer
